<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="noarchive">

<title>Securemark - secure markdown renderer working on browsers for user input data</title>

<!-- Bootstrap -->
<!-- Latest compiled and minified CSS -->
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/themes/prism.min.css" integrity="sha256-N1K43s+8twRa+tzzoF3V8EgssdDiZ6kd9r8Rfgg8kZU=" crossorigin="anonymous" />
<link href="/securemark/assets/lib/sequence-diagram-min.css" rel="stylesheet">
<style>
  #viewer .media {
    display: unset;
  }
  blockquote {
    padding: .3em;
    border-inline-start: .2em solid #eee;
  }
  blockquote > :not(blockquote) {
    margin-inline-start: .5em;
  }
  pre:not(.notranslate) {
    all: unset;
    white-space: pre-wrap;
  }
  pre,
  pre.code {
    background-color: #fbfbfb;
    position: relative;
    border: solid 1px #eee;
    border-radius: unset;
    padding: 1em;
    margin: .5em 0;
    overflow: auto;
  }
  pre[data-file]:before {
    content: attr(data-file);
    direction: ltr;
    position: absolute;
    top: 0;
    right: 0;
    border-left: solid 1px #eee;
    border-bottom: solid 1px #eee;
    border-radius: 2px;
    padding-left: 5px;
    padding-right: 2px;
  }
  .token.operator, .token.entity, .token.url, .language-css .token.string, .style .token.string {
    background: none;
  }
  svg {
    max-width: 100%;
  }
  .figcontent {
    display: block;
  }
  figure:not([data-group="$"]) > .figindex {
    display: inline-block;
    margin-inline-end: .5em;
    font-size: .9em;
  }
  figcaption {
    display: inline-block;
    font-size: .9em;
  }
  figure[data-group="$"] {
    display: grid;
    grid-template-rows: 2fr;
    grid-template-columns: 1fr min-content;
  }
  figure[data-group="$"] > .figcontent {
    grid-row: 1 / 2;
    grid-column: 1 / 2;
  }
  figure[data-group="$"] > .figindex {
    grid-row: 1 / 2;
    grid-column: 2 / 2;
    align-self: center;
    font-size: 1.2em;
  }
  figure[data-group="$"] > figcaption {
    grid-row: 2 / 2;
    grid-column-start: 1;
    grid-column-end: 3;
  }
  .annotation:not([id]),
  .authority:not([id]) {
    display: none;
  }
  .comment:before {
    content: "†";
    color: red;
    font-weight: bold;
  }
  .invalid {
    color: red;
    font-style: italic;
  }
  .invalid:before {
    content: "Invalid " attr(data-invalid-type) ": ";
  }
</style>

</head>
<body>
<noscript><p class="browsehappy warning">Please enable <strong>JavaScript</strong></p></noscript>
<!--[if lte IE 9]>
<p class="alert alert-warning" role="alert">You are using an <strong>outdated</strong> browser. Please <a class="alert-link" href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->

<div id="container" class="container">
<!-- ----- HEADER ------------------------------------------------------------- -->
<header id="header" class="row">
<h1 class="col-12">Securemark</h1>
<h3 class="col-12">Secure markdown renderer working on browsers for user input data.</h3>
<p class="col-12"><a href="https://github.com/falsandtru/securemark">https://github.com/falsandtru/securemark</a></p>
<div class="col-12" style="overflow-y: scroll; height: 1.5em">Share: <a id="share" href="" style="word-break: break-all;"></a></div>
<p class="col-12">Parsed <span id="chars">0</span> chars and rendered its result in <span id="time">-</span>ms.</p>
</header>

<div id="wrapper" class="row">
<!-- ----- PRIMARY ------------------------------------------------------------ -->
<div id="primary" class="col-12">
<article id="content" class="row">
  <div class="col-6"><textarea id="editor" class="w-100 h-100"></textarea></div>
  <div id="viewer" class="col-6"><ol id="annotation"></ol><ol id="authority"></ol></div>
</article>
<aside></aside>
</div>

</div>

<!-- ----- FOOTER ------------------------------------------------------------- -->
<footer id="footer">

</footer>

</div>
<script src="https://cdn.polyfill.io/v2/polyfill.js?flags=gated&features=default,NodeList.prototype.@@iterator,IntersectionObserver"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.28/webfontloader.js" integrity="sha256-4O4pS1SH31ZqrSO2A/2QJTVjTPqVe+jnYgOWUVr7EEc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js" integrity="sha256-67By+NpOtm9ka1R6xpUefeGOY8kWWHHRAKlvaTJ7ONI=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.5.1/snap.svg-min.js" integrity="sha256-oI+elz+sIm+jpn8F/qEspKoKveTc5uKeFHNNVexe6d8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js" integrity="sha256-G7A4JrJjJlFqP0yamznwPjAApIKPkadeHfyIwiaa9e0=" crossorigin="anonymous"></script>
<script src="/securemark/assets/lib/sequence-diagram-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.11.3/flowchart.min.js" integrity="sha256-YwLJwQt+hT+c1DCOHreZPY6kKlXl6UNOkKhDodA7Wqw=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.0.0/viz.js" integrity="sha256-bNrgdhNCcQJaZ5sTUCzFyL+Y3h3Is/EyJpH+Lw7Ouxs=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.0.0/full.render.js" integrity="sha256-xL5AKJzxGKMvEskoeJBbe0pVW1Q+SEKaWV75F6F0xIQ=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.min.js" integrity="sha256-jc6y1s/Y+F+78EgCT/lI2lyU7ys+PFYrRSJ6q8/R8+o=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha256-uCRLqQjYcKEykao3hISbnt7+Pf9EfLCJUD2oD0JLq40=" crossorigin="anonymous"></script>
<script>
  Prism.plugins.autoloader.languages_path = 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/';
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    Safe: {
      allow: {
        require: 'none',
      },
    },
    CommonHTML: {
      matchFontHeight: false,
    },
    messageStyle: 'none',
    skipStartupTypeset: true,
    extensions: ['TeX/AMScd.js', 'TeX/mhchem.js', 'Safe.js'],
    TeX: {
      mhchem: { legacy: false }
    },
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS_CHTML,Safe" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/1.0.8/purify.js" integrity="sha256-x9t6YjmmT13WS/j1ORGIlE+bKIiXvVe2087WllvNwjI=" crossorigin="anonymous"></script>
<script src="/securemark/assets/js/lib/securemark.js"></script>

<script>
  document.getElementById('editor').style.minHeight = window.innerHeight * 0.7 + 'px';
  document.getElementById('viewer').style.minHeight = window.innerHeight * 0.7 + 'px';
  document.getElementById('editor').value = decodeURIComponent(location.hash.replace(/^#?/, '')) || [
    '# Securemark [#Title]',
    '',
    'Markdown',
    '+',
    '`Syntax highlight`',
    '+',
    '${LaTeX}$\\',
    'and Media content embedding.',
    '',
    '## Code',
    '',
    '```haskell main.hs',
    'main = putStrLn $ show $ primes !! 5',
    '',
    'primes = filterPrime [2..]',
    ' where',
    '  filterPrime (p:xs) = p : filterPrime [x | x <- xs, x `mod` p /= 0]',
    '```',
    '',
    '## ${LaTeX}$',
    '',
    '${E = mc^2}$',
    '',
    '[:$-name]',
    '$$',
    '\\frac{\\pi}{2} =',
    '\\left(\\int_{0}^{\\infty} \\frac{\\sin x}{\\sqrt{x}} dx \\right)^2 =',
    '\\sum_{k=0}^{\\infty} \\frac{(2k)!}{2^{2k}(k!)^2} \\frac{1}{2k+1} =',
    '\\prod_{k=1}^{\\infty} \\frac{4k^2}{4k^2 - 1}',
    '$$',
    '',
    '## Figure',
    '',
    '~~~figure [:fig-name]',
    '!https://pbs.twimg.com/media/C-RAIleV0AAO81x.jpg',
    '',
    'Support Table, Pretext(Code), Math, and Media.',
    '~~~',
    '',
    '## Annotation',
    '',
    'Annotation syntax is refined footnotes((Annotations and its helper function generate footnotes *without manual numbering*.)).',
    '',
    '## Link',
    '',
    '~ normal [#normal-link]',
    'https://google.com',
    '~ nofollow [#nofollow-link]',
    'ttps://google.com',
    '',
    '## Index and Label',
    '',
    '### Index',
    '',
    '[#Title], [#Link], [#normal link], [#nofollow link]',
    '',
    '### Label',
    '',
    '[:$-name]',
    '[:fig-name]',
    '',
    '## Media',
    '',
    '!https://youtu.be/xRF7WIZV4lA',
    '!https://gist.github.com/falsandtru/cdf4a19b70012b0d6e3c9e1ec021e557',
    '!https://www.slideshare.net/Slideshare/get-started-with-slide-share',
    '!https://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_open_parameters.pdf',
    '!https://twitter.com/hourenso_u/status/856828123882676225?hide_thread=true',
    '!https://pbs.twimg.com/media/C-RAIleV0AAO81x.jpg',
    '',
    '## Blockquote',
    '',
    '>> **a',
    'b**',
    '',
    '!>> **a',
    'b**',
    '> - A',
    '  1. a',
    '  1. b',
    '  1. c',
    '- B',
    '  a. 4',
    '  a. 5',
    '  a. 6',
    '- C',
    '  7. a',
    '  1. b',
    '  1. c',
    '',
    ''
  ].join('\n');
  const viewer = document.getElementById('viewer');
  const { bind, figure, footnote, render } = require('securemark');
  const parse = bind(viewer);
  const observer = new IntersectionObserver(function (changes) {
    changes
      .forEach(function (change) {
        observer.unobserve(change.target);
        render(change.target);
      });
  }, {
    rootMargin: '100px',
  });
  document.getElementById('share').href = location.href;
  document.getElementById('share').textContent = document.getElementById('share').href;
  document.getElementById('chars').textContent = document.getElementById('editor').value.length;
  (async () => log(await display()))();
  let timer = 0;
  function run() {
    clearTimeout(timer);
    wait = new Promise(requestAnimationFrame);
    timer = setTimeout(async function () {
      await wait;
      log(await display());
      share();
    }, 300);
  }
  document.getElementById('editor').addEventListener('input', run);
  document.getElementById('editor').addEventListener('change', run);
  async function display() {
    let time = Date.now();
    let resource = 100;
    let elapsed = 0;
    for (const el of parse(document.getElementById('editor').value)) {
      observer.observe(el);
      elapsed += Date.now() - time;
      resource = resource > 0
        ? resource - (Date.now() - time)
        : void await new Promise(requestAnimationFrame) || 300;
      time = Date.now();
    }
    figure(viewer);
    footnote(viewer, {
      annotation: viewer.querySelector('#annotation'),
      authority: viewer.querySelector('#authority'),
    });
    return elapsed;
  }
  function log(time) {
    document.getElementById('time').textContent = time;
  }
  function share() {
    document.getElementById('chars').textContent = document.getElementById('editor').value.length;
    if (document.getElementById('editor').value.length > 10000) return;
    document.getElementById('share').href = '#' + encodeURIComponent(document.getElementById('editor').value);
    document.getElementById('share').textContent = document.getElementById('share').href;
  }
</script>

<script>
if (!window.ga) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-43533651-1', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('require', 'displayfeatures');
}
ga('send', 'pageview', window.location.pathname.replace(/^\/?/, '/') + window.location.search);
</script>

</body>
</html>
